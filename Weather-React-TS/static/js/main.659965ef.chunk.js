(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],[,,,,function(e,t,a){},,,,,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(7),s=a.n(r),o=a(2),i=a(3),l=a.n(i),u=a(5),h=a(8),d=function e(){var t=this;Object(h.a)(this,e),this._apiKey="9f794cbee16169a67f1379107a9a4b6e",this._baseURL="https://api.openweathermap.org/data/2.5/onecall",this.symbolOfWeather=function(e){return e-273.15>0?"+":e-273.15<0?"-":""},this.fetchFromServer=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a,", received ").concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getWeatherForSevenDays=function(){var e=Object(u.a)(l.a.mark((function e(a,c){var n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t._baseURL,"?lat=").concat(a,"&lon=").concat(c,"&&exclude=current,minutely,hourly,alerts&appid=").concat(t._apiKey),e.next=3,t.fetchFromServer(n);case 3:return r=e.sent,s=r.daily,e.abrupt("return",s.map((function(e){var a,c=t.symbolOfWeather(e.temp.day);return{id:e.dt,icon:"https://openweathermap.org/img/wn/".concat(null===(a=e.weather.find((function(e){return e.icon})))||void 0===a?void 0:a.icon,"@2x.png"),date:new Date(1e3*e.dt).toLocaleString("en",{year:"numeric",month:"short",day:"numeric"}).split(", ").join(" "),temperature:c+Math.round(e.temp.day-273.15).toString()+"\xb0"}})));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getWeatherForHistoricDate=function(){var e=Object(u.a)(l.a.mark((function e(a,c,n){var r,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t._baseURL,"/timemachine?lat=").concat(a,"&lon=").concat(c,"&dt=").concat(n,"&appid=").concat(t._apiKey),e.prev=1,e.next=4,t.fetchFromServer(r);case 4:return s=e.sent,o=s.current,i=t.symbolOfWeather(o.temp),e.abrupt("return",{icon:"https://openweathermap.org/img/wn/".concat(o.weather[0].icon,"@2x.png"),date:new Date(1e3*o.dt).toLocaleString("en",{year:"numeric",month:"short",day:"numeric"}).split(", ").join(" "),temperature:"".concat(i).concat(Math.round(o.temp-273.15).toString(),"\xb0")});case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{icon:"",date:"",temperature:""});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,c){return e.apply(this,arguments)}}()},j=(a(14),a(0)),b=function(){return Object(j.jsxs)("div",{className:"title",children:[Object(j.jsx)("div",{className:"title__item title__item-1",children:"Weather"}),Object(j.jsx)("div",{className:"title__item title__item-2",children:"forecast"})]})},m=(a(16),function(e){var t=e.cities,a=e.onChangeLocation,n=e.blockSelect,r=Object(c.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],u="select-city__wrapper";return i?u+=" active":u="select-city__wrapper",Object(j.jsx)("div",{className:u,children:Object(j.jsxs)("select",{className:"select select-city",onFocus:function(){return l(!0)},onBlur:function(){return l(!1)},onChange:function(e){a(e.target.value,n),e.target.blur()},children:[Object(j.jsx)("option",{hidden:!0,children:"Select city"}),t.map((function(e){return Object(j.jsx)("option",{value:"".concat(e.lat,", ").concat(e.lon),children:e.name},e.lat)}))]})})}),v=a.p+"static/media/placeholder.59a85e9a.svg",p=(a(17),function(){return Object(j.jsxs)("div",{className:"placeholder",children:[Object(j.jsx)("img",{className:"placeholder__image",src:v,alt:"cloud"}),Object(j.jsx)("p",{className:"placeholder__text",children:"Fill in all the fields and the weather will be displayed"})]})}),O=a.p+"static/media/arrow-left.c57d52d4.svg",f=(a(4),function(e){var t=e.scrollToThePrevForecast;return Object(j.jsx)("div",{onClick:t,className:"weather-blocks__arrow-left",children:Object(j.jsx)("img",{src:O,alt:"arrow-left"})})}),x=a.p+"static/media/arrow-right.e6596943.svg",w=function(e){var t=e.scrollToTheNextForecast;return Object(j.jsx)("div",{onClick:t,className:"weather-blocks__arrow-right",children:Object(j.jsx)("img",{src:x,alt:"arrow-right"})})},_=(a(18),a(19),function(e){var t=e.date,a=e.icon,c=e.temperature;return Object(j.jsx)("div",{className:"weather-card",children:Object(j.jsxs)("div",{className:"weather-card__flex",children:[Object(j.jsx)("div",{className:"weather-card__date",children:t}),Object(j.jsx)("img",{className:"weather-card__image",src:a,alt:""}),Object(j.jsx)("div",{className:"weather-card__temp",children:c})]})})}),y=function(e){var t=e.date,a=e.icon,c=e.temperature,n=a?Object(j.jsx)("img",{className:"historic-weather-card__image",src:a,alt:""}):null,r=t?Object(j.jsx)("div",{className:"historic-weather-card__date",children:t}):Object(j.jsx)("div",{className:"error-text",children:"Please enter last 5 days or choose from calendar"});return Object(j.jsx)("div",{className:"historic-weather-card",children:Object(j.jsxs)("div",{className:"historic-weather-card__flex",children:[r,n,Object(j.jsx)("div",{className:"historic-weather-card__temp",children:c})]})})},g=function(e){var t=e.date,a=e.icon,c=e.temperature;return 0===e.blockSelect?Object(j.jsx)(_,{date:t,icon:a,temperature:c}):Object(j.jsx)(y,{date:t,icon:a,temperature:c})},D=function(e){var t=e.sevenDaysWeatherData,a=e.showAllWeatherCardsForSevenDays,c=e.onPreviousDay,n=e.onNextDay,r=e.blockSelect,s=a?null:Object(j.jsx)(f,{scrollToThePrevForecast:c}),o=a?null:Object(j.jsx)(w,{scrollToTheNextForecast:n});return Object(j.jsxs)("div",{className:"weather-blocks",children:[s,t.map((function(e){return Object(j.jsx)(g,{date:e.date,icon:e.icon,temperature:e.temperature,blockSelect:r},e.id)})),o]})},S=(a(20),function(e){var t=e.onChangeDate,a=Object(c.useState)(!1),n=Object(o.a)(a,2),r=n[0],s=n[1],i=new Date(Date.now()-432e6).toISOString().slice(0,10),l=(new Date).toISOString().slice(0,10),u=r?0:1;return Object(j.jsxs)("div",{className:"select-date__wrapper",children:[Object(j.jsx)("input",{type:"text",className:"select select-date__placeholder",placeholder:"Select date",style:{opacity:u}}),Object(j.jsx)("input",{className:"select select-date",type:"date",min:i,max:l,onChange:function(e){var a=Date.parse(e.target.value)/1e3;t&&t(a)},onFocus:function(){return s(!0)},onBlur:function(){return s(!1)},onInput:function(){return s(!0)}})]})}),N=function(e){var t=e.sevenDaysWeatherData,a=e.showSevenDaysForecast,c=e.cities,n=e.onChangeLocation,r=e.onPreviousDay,s=e.onNextDay,o=e.showAllWeatherCardsForSevenDays,i=e.title,l=e.blockSelect,u=a?Object(j.jsx)(D,{sevenDaysWeatherData:t,onNextDay:s,onPreviousDay:r,showAllWeatherCardsForSevenDays:o,blockSelect:l}):Object(j.jsx)(p,{});return Object(j.jsx)("section",{className:"card",children:Object(j.jsxs)("div",{className:"card__content",children:[Object(j.jsxs)("div",{className:"card__content-header",children:[Object(j.jsx)("h2",{className:"card__content-title",children:i}),Object(j.jsx)(m,{onChangeLocation:n,cities:c,blockSelect:l})]}),Object(j.jsx)("div",{children:u})]})})},F=function(e){var t=e.cities,a=e.onChangeLocation,c=e.blockSelect,n=e.showHistoricForecast,r=e.historicWeatherData,s=e.onChangeDate,o=e.title,i=n?Object(j.jsx)(g,{date:r.date,icon:r.icon,temperature:r.temperature,blockSelect:c}):Object(j.jsx)(p,{});return Object(j.jsx)("section",{className:"card",children:Object(j.jsxs)("div",{className:"card__content",children:[Object(j.jsxs)("div",{className:"card__content-header",children:[Object(j.jsx)("h2",{className:"card__content-title",children:o}),Object(j.jsxs)("div",{className:"card__select",children:[Object(j.jsx)(m,{cities:t,onChangeLocation:a,blockSelect:c}),Object(j.jsx)(S,{onChangeDate:s})]})]}),Object(j.jsx)("div",{children:i})]})})},C=function(e){var t=e.sevenDaysWeatherData,a=e.showSevenDaysForecast,c=e.cities,n=e.onChangeLocation,r=e.onPreviousDay,s=e.onNextDay,o=e.showAllWeatherCardsForSevenDays,i=e.title,l=e.blockSelect,u=e.showHistoricForecast,h=e.historicWeatherData,d=e.onChangeDate;return 0===l?Object(j.jsx)(N,{sevenDaysWeatherData:t,showSevenDaysForecast:a,cities:c,onChangeLocation:n,onPreviousDay:r,onNextDay:s,showAllWeatherCardsForSevenDays:o,title:i,blockSelect:l}):Object(j.jsx)(F,{title:i,cities:c,onChangeLocation:n,blockSelect:l,showHistoricForecast:u,historicWeatherData:h,onChangeDate:d})};a(21);var k=function(){var e=function(){var e=n.a.useState(window.innerWidth),t=Object(o.a)(e,2),a=t[0],r=t[1];Object(c.useEffect)((function(){return window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}}));var s=function(){r(window.innerWidth)};return a}(),t=Object(c.useState)([{name:"\u0421\u0430\u043c\u0430\u0440\u0430",lat:53.195873,lon:50.100193},{name:"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438",lat:53.507836,lon:49.420393},{name:"\u0421\u0430\u0440\u0430\u0442\u043e\u0432",lat:51.533557,lon:46.034257},{name:"\u041a\u0430\u0437\u0430\u043d\u044c",lat:55.796127,lon:49.106405},{name:"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440",lat:45.03547,lon:38.975313}]),a=Object(o.a)(t,1)[0],r=Object(c.useState)([{lat:null,lon:null},{lat:null,lon:null}]),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(c.useState)(null),h=Object(o.a)(u,2),m=h[0],v=h[1],p=Object(c.useState)([]),O=Object(o.a)(p,2),f=O[0],x=O[1],w=Object(c.useState)({date:"",icon:"",temperature:""}),_=Object(o.a)(w,2),y=_[0],g=_[1],D=Object(c.useState)(!1),S=Object(o.a)(D,2),N=S[0],F=S[1],k=Object(c.useState)(!1),W=Object(o.a)(k,2),L=W[0],P=W[1],T=Object(c.useState)(!1),E=Object(o.a)(T,2),A=E[0],H=E[1],I=Object(c.useState)(0),B=Object(o.a)(I,2),K=B[0],M=B[1],R=Object(o.a)(i,2),U=R[0],z=R[1];Object(c.useEffect)((function(){var e=U.lat,t=U.lon;e&&t&&(new d).getWeatherForSevenDays(e,t).then((function(e){x([]),x(A?e:e.slice(K,3+K)),F(!0)}))}),[U,K,A]),Object(c.useEffect)((function(){var e=z.lat,t=z.lon;e&&t&&m&&(new d).getWeatherForHistoricDate(e,t,m).then((function(e){g(e),P(!0)}))}),[z,m]),Object(c.useEffect)((function(){H(e<=660)}),[e]);var J=function(e,t){var a=e.split(", "),c=Object(o.a)(a,2),n={lat:+c[0],lon:+c[1]};l((function(e){return e.map((function(a){return a===e[t]?n:a}))}))};return Object(j.jsx)("div",{className:"app",children:Object(j.jsxs)("div",{className:"_container",children:[Object(j.jsx)("header",{className:"app__title",children:Object(j.jsx)(b,{})}),Object(j.jsxs)("main",{className:"app__blocks",children:[Object(j.jsx)(C,{cities:a,title:"7 Days Forecast",showSevenDaysForecast:N,onChangeLocation:J,onPreviousDay:function(){0<K&&K<=5&&M((function(e){return--e}))},onNextDay:function(){0<=K&&K<5&&M((function(e){return++e}))},showAllWeatherCardsForSevenDays:A,sevenDaysWeatherData:f,blockSelect:0}),Object(j.jsx)(C,{cities:a,title:"Forecast for a Date in the Past",showHistoricForecast:L,onChangeLocation:J,onChangeDate:function(e){return v(e)},historicWeatherData:y,blockSelect:1})]})]})})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root")),W()}],[[22,1,2]]]);
//# sourceMappingURL=main.659965ef.chunk.js.map